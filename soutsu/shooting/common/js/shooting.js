!function(e){"use strict";e(function(){function t(){var t=e("#game-start-btn");t.addClass("is-block");var i=e("body");createjs.Sound.registerSound("../shooting/common/sound/seishinsekai.mp3","seishin"),createjs.Sound.registerSound("../shooting/common/sound/wani.mp3","wani"),createjs.Sound.registerSound("../shooting/common/sound/gero.mp3","gero"),createjs.Sound.registerSound("../shooting/common/sound/atari.mp3","atari"),t.on("click",function(){return i.hasClass("portrait")?(alert("スマートフォンを横向きにしてください。"),!1):(a(),e(this).remove(),o(),void 0)})}function a(){var e=createjs.Sound.createInstance("seishin");e.play({loop:-1})}function i(){createjs.Sound.play("gero")}function n(){createjs.Sound.play("atari")}function s(){createjs.Sound.play("wani")}function o(){function t(){var e=new createjs.Bitmap(c.getResult("gero"));i(),e.x=h.x,e.y=h.y,r.addChild(e),g.push(e)}function a(){h.x+=.1*(r.mouseX-h.x),h.y+=.1*(r.mouseY-h.y),u+=1;var e;u%60===0&&(e=j%100===0&&j>0?new createjs.Bitmap(c.getResult("boss")):j%53===0&&j>0?new createjs.Bitmap(c.getResult("yuruawa")):j%23===0&&j>0?new createjs.Bitmap(c.getResult("backin")):j%17===0&&j>0?new createjs.Bitmap(c.getResult("girl")):j%13===0&&j>0?new createjs.Bitmap(c.getResult("unko")):j%11===0&&j>0?new createjs.Bitmap(c.getResult("chinko")):j%7===0&&j>0?new createjs.Bitmap(c.getResult("oji2")):j%5===0&&j>0?new createjs.Bitmap(c.getResult("tori")):j%3===0?new createjs.Bitmap(c.getResult("zonbee")):j%2===0?new createjs.Bitmap(c.getResult("erian")):new createjs.Bitmap(c.getResult("oji")),e.x=p,e.y=m*Math.random(),e.y<95?e.y=100:e.y>284&&(e.y=150),r.addChild(e),d.push(e),j++);for(var t=0;t<g.length;t++)g[t].x+=10,g[t].x>p&&(r.removeChild(g[t]),g.splice(t,1));for(var t=0;t<d.length;t++)d[t].x-=2,d[t].x<0&&o();for(var a=0;a<d.length;a++)for(var t=0;t<g.length;t++){var i=g[t],e=d[a],s=i.localToLocal(0,0,e);if(e.hitTest(s.x,s.y)===!0){r.removeChild(i),g.splice(t,1),r.removeChild(d[a]),d.splice(a,1),n(),l+=1e3,f.text=String("躁鬱レベル："+l+" ポイント");break}}r.update()}function o(){s(),createjs.Ticker.removeAllEventListeners(),r.removeAllEventListeners(),e("#myCanvas").remove(),e("#js-box-ex").remove();var t=e("meta[property='og:url']").attr("content");e("#wrap").append('<div id="game-over"><p class="end-game">GAME OVER</p><p class="level">躁鬱くんは<br><span>'+l+' </span>錠のおクスリを飲み、死にました。<br>躁鬱くんを殺したのは、他でもないあなたなのです…</p><p class="last-msg"><img src="/soutsu/shooting/img/gameover.png" alt=""><br>Happy end<span>❤</span></p></div><div id="tweet"><a href="http://twitter.com/intent/tweet?original_referer='+t+"&amp;url="+t+"&amp;text=%e3%80%8e%e3%81%89%e3%81%8f%e3%81%95%e3%83%b3%e2%80%a6%e3%81%83%e3%83%83%e3%81%b1%e3%81%83%e2%80%a6%e3%81%af%e3%81%8d%e3%81%be%e3%81%97%e3%81%9f%e3%81%ad%e2%80%a6%e3%80%8f%20%e3%82%b9%e3%82%b3%e3%82%a2%ef%bc%9a"+l+'%e3%80%80%23%e8%ba%81%e9%ac%b1%e6%bc%ab%e7%94%bb%e9%9b%86%e3%80%80%23%e8%ba%81%e9%ac%b1%e3%81%97%e3%82%85%e3%80%9c%e3%81%a6%e3%81%83%e3%83%b3%e3%81%90"><i class="fa fa-twitter" aria-hidden="true"></i> ツイート</a></div><a href="/soutsu/shooting/shooting.html?sec" id="retry-btn"><i class="fa fa-refresh" aria-hidden="true"></i> リトライ</a>').css({height:"auto"}),e("#game-over").addClass("bounce"),e("#js-ad").addClass("wrap")}var r=new createjs.Stage("myCanvas"),d=[],g=[],u=0,l=0,p=667,m=330,h=new createjs.Bitmap(c.getResult("soutsukun"));h.scaleX=.5,h.scaleY=.5;var v=h.getBounds().width/2,b=h.getBounds().height/2;h.x=v,h.y=b,h.regX=v,h.regY=b,h.rotation=90,r.addChild(h);var f=new createjs.Text("躁鬱レベル：","20px sans-serif","white");f.x=20,f.y=300,r.addChild(f),createjs.Touch.isSupported()&&createjs.Touch.enable(r),r.addEventListener("click",t),createjs.Ticker.setFPS(60),createjs.Ticker.addEventListener("tick",a);var j=0}var r=[{id:"soutsukun",src:"../shooting/img/index.png"},{id:"gero",src:"../shooting/img/gero.png"},{id:"boss",src:"../shooting/img/boss.png"},{id:"girl",src:"../shooting/img/girl.png"},{id:"unko",src:"../shooting/img/unko.png"},{id:"chinko",src:"../shooting/img/chinko.png"},{id:"tori",src:"../shooting/img/tori.png"},{id:"zonbee",src:"../shooting/img/zonbee.png"},{id:"erian",src:"../shooting/img/erian.png"},{id:"oji",src:"../shooting/img/oji.png"},{id:"yuruawa",src:"../shooting/img/yuruawa.png"},{id:"oji2",src:"../shooting/img/oji2.png"},{id:"backin",src:"../shooting/img/backin.png"}],c=new createjs.LoadQueue;c.setMaxConnections(10),c.loadManifest(r,!0),c.on("complete",t);var d=!1;(navigator.userAgent.indexOf("iPhone")>0||navigator.userAgent.indexOf("iPad")>0||navigator.userAgent.indexOf("iPod")>0||navigator.userAgent.indexOf("Android")>0)&&(d=!0);var g=function(){if(d){if(!(window.innerHeight>window.innerWidth))return e("body").addClass("landscape"),e("body").removeClass("portrait"),!1;e("body").addClass("portrait"),e("body").removeClass("landscape")}};e(window).resize(function(){g()}),g()})}(jQuery);